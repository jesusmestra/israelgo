<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="/plantilla.xhtml">

            <ui:define name="content">

                <div class="panel panel-default">
                    <div class="panel-heading">Panel heading without title</div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtNit" value="Nit"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtNit" value="#{empresaController.seleccionado.nit}"></h:outputText>
                                    </dd>
                                </dl>

                            </div>
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtNombre" value="Nombre"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtNombre" value="#{empresaController.seleccionado.nombre}"></h:outputText>
                                    </dd>
                                </dl>

                            </div>
                        </div>
                        
                        
                        
                        <div class="row">
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtRepresentante" value="Representante"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtRepresentante" value="#{empresaController.seleccionado.representante.identificacion} | #{empresaController.seleccionado.representante.apellido1}, #{empresaController.seleccionado.representante.nombres} "></h:outputText>
                                    </dd>
                                </dl>


                            </div>
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                    </dt>
                                    <dd>
                                    </dd>
                                </dl>

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtDireccion" value="Direccion"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtDireccion" value="#{empresaController.seleccionado.direccion}"></h:outputText>
                                    </dd>
                                </dl>


                            </div>
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtTelefono" value="Telefono"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtTelefono" value="#{empresaController.seleccionado.telefono}"></h:outputText>
                                    </dd>
                                </dl>

                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtLogo" value="Logo"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtLogo" value="#{empresaController.seleccionado.logo}"></h:outputText>
                                    </dd>
                                </dl>


                            </div>
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtEmail" value="Email"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtEmail" value="#{empresaController.seleccionado.email}"></h:outputText>
                                    </dd>
                                </dl>

                            </div>
                        </div>


                        <div class="row">
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtEmailPass" value="Email Pass"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtEmailPass" value="#{empresaController.seleccionado.emailPass}"></h:outputText>
                                    </dd>
                                </dl>


                            </div>
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtEmailHost" value="Email Host"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtEmailHost" value="#{empresaController.seleccionado.emailHost}"></h:outputText>
                                    </dd>
                                </dl>

                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                        <p:outputLabel for="txtEmailPort" value="Email Port"></p:outputLabel>
                                    </dt>
                                    <dd>
                                        <h:outputText id="txtEmailPort" value="#{empresaController.seleccionado.emailPort}"></h:outputText>
                                    </dd>
                                </dl>


                            </div>
                            <div class="col-md-6">
                                <dl class="dl-horizontal">
                                    <dt> 
                                    </dt>
                                    <dd>
                                    </dd>
                                </dl>

                            </div>
                        </div>



                    </div>
                </div>



              <h:form id="frmPrincipal">

                        <h4>Proyectos </h4>
                        <p:commandButton icon="ui-icon-plusthick" value="Nuevo" 
                                         oncomplete="PF('wDialogoNuevoProyecto').show();"                
                                         actionListener="#{empresaController.crearProyecto()}"
                                         update=":frmDialogoNuevoProyecto"
                                         />


                        <p:dataTable id="listaProyectos" emptyMessage="No hay resultados a mostrar" value="#{empresaController.proyectoList }" var="proy">
                            <p:column headerText="Nombre" filterBy="#{proy.nombre}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="nombre" />
                                </f:facet>
                                <h:outputText value="#{proy.nombre}" />
                            </p:column>

                            <p:column headerText="Editar">
                                <p:commandLink value="Editar" oncomplete="PF('wDialogoNuevoProyecto').show();" actionListener="#{empresaController.seleccionarProyecto(proy) }"
                                               update=":frmDialogoNuevoProyecto" />
                            </p:column>

                        </p:dataTable>
                     

                    </h:form>   



                 <p:dialog id="dialogoNuevoProyecto" appendTo="@(body)" widgetVar="wDialogoNuevoProyecto" header="Nuevo Proyecto" modal="true" 
                              resizable="false" closeOnEscape="true" draggable="false">
                        <h:form id="frmDialogoNuevoProyecto">
                            <h:panelGrid columns="2">
                                <p:outputLabel for="txtNombre" value="Nombre"/>
                                <p:inputText id="txtNombre"  required="true"  
                                             value="#{empresaController.proyectoInstance.nombre }"/>
                                
                                 <p:commandButton value="#{empresaController.accion}" icon="ui-icon-check" update=":frmPrincipal:listaProyectos" 
                                                  actionListener="#{empresaController.registraProyecto()}" oncomplete="PF('wDialogoNuevoProyecto').hide();" 
                                                 rendered="#{empresaController.accion == 'Grabar'}"
                                                 />
                                 
                                  <p:commandButton value="#{empresaController.accion}" icon="ui-icon-refresh" update=":frmPrincipal:listaProyectos" 
                                                   actionListener="#{empresaController.registraProyecto() }" oncomplete="PF('wDialogoNuevoProyecto').hide();" 
                                                 rendered="#{empresaController.accion == 'Actualizar'}"
                                                 />
                                
                                  <p:commandButton value="Eliminar" icon="ui-icon-refresh" update=":frmPrincipal:listaProyectos" 
                                                   actionListener="#{empresaController.eliminarProyecto() }" oncomplete="PF('wDialogoNuevoProyecto').hide();" 

                                                 />
                                <p:commandButton value="Cancelar" icon="ui-icon-close" oncomplete="PF('wDialogoNuevoProyecto').hide();"/>
                                 
                                 
                            </h:panelGrid>
                        </h:form>

                    </p:dialog>


            </ui:define>
        </ui:composition>     
    </body>
</html>
